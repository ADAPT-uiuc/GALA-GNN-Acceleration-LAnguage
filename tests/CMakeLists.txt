# if (GEN_SPADE)
#     add_executable(spade_codegen_spmm_test spade_codegen_spmm_test.cpp)
# endif ()
# if (SP_TEST)
#     add_executable(spade_cpu_spmm_impl spade_cpu_spmm_impl.cpp)
#     add_executable(spade_cpu_spmm_impl_bulk spade_cpu_spmm_impl_bulk.cpp)
#     add_executable(spade_cpu_spmm_impl_bulk2 spade_cpu_spmm_impl_bulk2.cpp)

#     add_executable(spade_cpu_spmm_impl_test_slice spade_cpu_spmm_impl_test_slice.cpp)
#     add_executable(spade_cpu_spmm_impl_test_barrierless spade_cpu_spmm_impl_test_barrierless.cpp)
#     add_executable(spade_cpu_spmm_impl_test_aos spade_cpu_spmm_impl_test_aos.cpp)

#     add_executable(spade_graph_data spade_graph_data.cpp)
# endif ()
# if (DSL)
# #    add_executable(gat_test gat_test.cpp)
# #    add_executable(gcn_test gcn_test.cpp)
# #    add_executable(gat_pretiling_test gat_pretiling_test.cpp)
# #    add_executable(gcn_pretiling_test gcn_pretiling_test.cpp)
# #    add_executable(aten_test aten_test.cpp)
# #    target_link_libraries(aten_test "${TORCH_LIBRARIES}")
# #    add_executable(spade_cpu_spmm_impl spade_cpu_spmm_impl.cpp)
# #    add_executable(unit_test unit_test_IR.cpp)
#     add_executable(torch_gcn_test torch_api_cusparse_gcn.cpp)
#     add_executable(cuda_troch_gcn gcn_model.cu)
# endif ()

include_directories(${CMAKE_CURRENT_BINARY_DIR} ../src/frontend)

#BISON_TARGET(Parser ../src/frontend/frontend.y ${CMAKE_CURRENT_BINARY_DIR}/parser.cpp DEFINES_FILE ${CMAKE_CURRENT_BINARY_DIR}/parser.tab.hpp)
#FLEX_TARGET(Lexer ../src/frontend/frontend.l ${CMAKE_CURRENT_BINARY_DIR}/lexer.cpp)
BISON_TARGET(Parser ../src/frontend/frontend.y ${CMAKE_CURRENT_BINARY_DIR}/frontend.tab.c DEFINES_FILE ${CMAKE_CURRENT_BINARY_DIR}/frontend.tab.h)
FLEX_TARGET(Lexer ../src/frontend/frontend.l ${CMAKE_CURRENT_BINARY_DIR}/lexer.cpp)
ADD_FLEX_BISON_DEPENDENCY(Lexer Parser)

add_executable(gcn_ir gala_gcn_IR.cpp ${BISON_Parser_OUTPUTS} ${FLEX_Lexer_OUTPUTS})
#add_executable(gin_ir gala_gin_IR.cpp ${BISON_Parser_OUTPUTS} ${FLEX_Lexer_OUTPUTS})
#add_executable(gat_ir gala_gat_IR.cpp ${BISON_Parser_OUTPUTS} ${FLEX_Lexer_OUTPUTS})

#add_executable(gcn_test_ir gcn_test_IR.cpp)
#add_executable(gcn_ir gala_gcn_IR.cpp)
#add_executable(gin_ir gala_gin_IR.cpp)
#add_executable(gat_ir gala_gat_IR.cpp)